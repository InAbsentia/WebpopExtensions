// Generated by CoffeeScript 1.3.3
(function(){var e;e=require("http");exports.tweets=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;a="http://api.twitter.com/1/statuses/user_timeline.json";u=e.get(a,{data:{screen_name:t.screen_name,count:t.count,include_entities:!0,include_rts:!0}});r=function(e,t){var n,r,i,s,o;n=0;r="";for(s=0,o=t.length;s<o;s++){i=t[s];r+=e.slice(n,i.start);r+=i.replaceWith;n=i.end}return r+=e.slice(n,e.length)};for(l=0,d=u.length;l<d;l++){o=u[l];o.date=new Date(o.created_at);s=[];if(o.entities.urls[0]!=="undefined"){y=o.entities.urls;for(c=0,v=y.length;c<v;c++){a=y[c];i="<a href='"+a.expanded_url+"' target='_blank'>"+a.display_url+"</a>";s.push({start:a.indices[0],end:a.indices[1],replaceWith:i})}}if(o.entities.user_mentions[0]!=="undefined"){b=o.entities.user_mentions;for(h=0,m=b.length;h<m;h++){f=b[h];i="<a href='https://twitter.com/#!/"+f.screen_name+"' target='_blank'>@"+f.name+"</a>";s.push({start:f.indices[0],end:f.indices[1],replaceWith:i})}}if(o.entities.hashtags[0]!=="undefined"){w=o.entities.hashtags;for(p=0,g=w.length;p<g;p++){n=w[p];i="<a href='https://twitter.com/#!/search?q=%23"+n.text+"' target='_blank'>#"+n.text+"</a>";s.push({start:n.indices[0],end:n.indices[1],replaceWith:i})}}s.sort(function(e,t){return e.start-t.start});o.text={html:r(o.text,s)}}return u}}).call(this);