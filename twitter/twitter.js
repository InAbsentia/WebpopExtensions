// Generated by CoffeeScript 1.6.1
(function(){var e;e=require("http");exports.tweets=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;f="https://api.twitter.com/1.1/statuses/user_timeline.json";r={screen_name:t.screen_name,count:t.count};a=e.get(f,{data:r});if(!a)return[{text:"Error retrieving tweets."}];i=function(e,t){var n,r,i,s,o;n=0;r="";for(s=0,o=t.length;s<o;s++){i=t[s];r+=e.slice(n,i.start);r+=i.replaceWith;n=i.end}return r+=e.slice(n,e.length)};for(c=0,v=a.length;c<v;c++){u=a[c];u.date=new Date(u.created_at);o=[];if(u.entities.urls[0]!=="undefined"){b=u.entities.urls;for(h=0,m=b.length;h<m;h++){f=b[h];s="<a href='"+f.expanded_url+"' target='_blank'>"+f.display_url+"</a>";o.push({start:f.indices[0],end:f.indices[1],replaceWith:s})}}if(u.entities.user_mentions[0]!=="undefined"){w=u.entities.user_mentions;for(p=0,g=w.length;p<g;p++){l=w[p];s="<a href='https://twitter.com/#!/"+l.screen_name+"' target='_blank'>@"+l.name+"</a>";o.push({start:l.indices[0],end:l.indices[1],replaceWith:s})}}if(u.entities.hashtags[0]!=="undefined"){E=u.entities.hashtags;for(d=0,y=E.length;d<y;d++){n=E[d];s="<a href='https://twitter.com/#!/search?q=%23"+n.text+"' target='_blank'>#"+n.text+"</a>";o.push({start:n.indices[0],end:n.indices[1],replaceWith:s})}}o.sort(function(e,t){return e.start-t.start});u.text={html:i(u.text,o)}}return a}}).call(this);